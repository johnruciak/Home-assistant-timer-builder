# ‚è±Ô∏è EntityTimer
### The AI-Powered "Auto-Off" Architect for Home Assistant.

**EntityTimer** turns "dumb" switches into intelligent, self-monitoring systems. Using Gemini 3 Pro Vision, it scans your dashboard screenshots to identify devices and generates modular, safety-first YAML packages that add countdown timers, advanced scheduling, and climate logic in seconds.

---

## ‚ú® Key Features

- **üì∏ Visual Discovery**: Drop a screenshot of your Home Assistant dashboard and let AI identify your entity IDs and names automatically.
- **üõ°Ô∏è Watchdog Security**: Unlike simple "delay" automations, EntityTimer uses the native `timer` integration. This ensures your devices turn off even if Home Assistant restarts during a countdown.
- **üìÖ Advanced Scheduling**: Built-in support for time-based, Sunrise, or Sunset triggers with recurrence patterns (Daily, Weekdays, Weekends).
- **‚ùÑÔ∏è Climate Intelligence**: Specialized logic for AC units‚Äîset target temperatures and HVAC modes that automatically reset when the timer expires.
- **üì¶ Modular Packages**: Generates "one-file-per-device" code that keeps your configuration clean and easy to manage.

---

## üöÄ Quick Start

1. **Scan**: Drop a screenshot of your UI or select a device from your synced library.
2. **Configure**: Set your default duration (e.g., 45 minutes) and optional start schedules.
3. **Deploy**: Download the generated `.yaml` file and place it in your `packages/` folder.

---

## üõ†Ô∏è Mandatory Home Assistant Setup

To use the modular code generated by this tool, your Home Assistant must support **Packages**.

### 1. Enable Packages
Add this to your `configuration.yaml` (usually at the very top):

```yaml
homeassistant:
  packages: !include_dir_named packages/
```

### 2. Prepare Folders
In your `/config/` directory (where `configuration.yaml` lives), ensure the `packages/` folder exists.

### 3. Loading the Code
1. Place the downloaded `.yaml` file into `/config/packages/`.
2. Go to **Developer Tools > YAML**.
3. Click **Check Configuration**.
4. If valid, click **Reload All YAML Configuration** (or Restart Home Assistant).

---

## üß† Why use "Packages"?

Standard Home Assistant automations can become a "spaghetti" mess. EntityTimer uses **Packages**, which allow us to bundle the Timer, the Input Slider, the Scripts, and the Automations for a single device into **one single file**.

- **Easy Removal**: Want to delete a timer? Just delete its file.
- **Visual Editor Compatibility**: All automations include unique IDs so you can still see (though not edit) them in the HA UI.
- **Portability**: Share your timer packages with friends by just sending them one file.

---

## üó∫Ô∏è Roadmap
- [ ] **HACS Integration**: A native card for the Home Assistant UI.
- [ ] **Blueprint Export**: Option to output Blueprints for those who prefer the UI editor.
- [ ] **Websocket Sync**: Direct "One-Click" deployment to your HA instance via API.
- [ ] **Multi-Stage Logic**: Support for "Pre-warning" notifications before a device turns off.

---

## ü§ù Contributing
EntityTimer is open-source. We welcome PRs for new domain support (e.g., Vacuums, Media Players) or improved UI components.

**License**: MIT - Created for the Home Assistant Community.
